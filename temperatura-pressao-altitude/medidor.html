<html>
  <head>
   <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
   <script type="text/javascript">

      //JSonBuscar();

      google.charts.load('current', {'packages':['gauge']});
      //google.charts.setOnLoadCallback(drawChart);
      google.charts.setOnLoadCallback(JSonBuscar);



      function JSonBuscar()
      {        
        var _url = 'https://www.negritando.com/temperatura-pressao-altitude/medidor.json';
        _url = 'http://localhost:35145/api/meteorologia/listar/esp8266';
        _url = 'http://localhost:8000/api/meteorologia/esp8266';

        const _request = new Request(_url, {method:"GET"});
/*
        _request.json()
          .then((data) => {
            // do something with the data sent in the request
            debugger;
          });
*/

      fetch(_url)
          .then( response => response.text())
          .then(data => {

            debugger;

            var json_ = JSON.parse(data);
            var json_temperatura_ = [['Label','Value']];
            var json_pressao__ = [['Label','Value']];
            var json_altitude__ = [['Label','Value']];

            var temperatura = json_.temperatura;
            var pressao = json_.pressao;
            var altitude = json_.altitude;    

            var linha = ['temperatura', temperatura]
            json_temperatura_.push(linha);

            linha = ['pressao', pressao]
            json_pressao__.push(linha);

            linha = ['altitude', altitude]
            json_altitude__.push(linha);       
/*
            for(var k in json_) {

              for(var kk in json_[k])
              {

                var temperatura = json_[k].temperatura;
                var pressao = json_[k].pressao;
                var altitude = json_[k].altitude;

                var linha = ['temperatura', temperatura]
                json__.push(linha);

                var linha = ['pressao', pressao]
                json__.push(linha);
                
                var linha = ['altitude', altitude]
                json__.push(linha);                

                break;
              }


              break;

            }

*/
            GraficoDesenhar(json_temperatura_, 'id_temperatura' , {width: 400, height: 120,redFrom: 27, redTo: 50,yellowFrom:0, yellowTo: 10,minorTicks: 5,max:50});
            GraficoDesenhar(json_pressao__, 'id_pressao'        , {width: 400, height: 120,redFrom: 101325, redTo: 105000,yellowFrom:0, yellowTo: 10,minorTicks: 5,max:105000});
            GraficoDesenhar(json_altitude__, 'id_altitude'      , {width: 400, height: 120,redFrom: 2500, redTo: 3000,yellowFrom:0, yellowTo: 10,minorTicks: 5,max:3000});
          });

      }

      function GraficoDesenhar(data_, chart_id_, options__)
      {
        var data_ = google.visualization.arrayToDataTable(data_);

        var chart = new google.visualization.Gauge(document.getElementById(chart_id_));

        chart.draw(data_, options__);
      }

    </script>
  </head>
  <body>
    <a target="_blank" href="https://www.todamateria.com.br/pressao-atmosferica/#:~:text=Esse%20valor%20corresponde%20a%20101325,da%20press%C3%A3o%20atmosf%C3%A9rica%20tamb%C3%A9m%20reduz.">
      <div id="id_temperatura" style="width: 400px; height: 120px;"></div>
    </a>

    <a target="_blank" href="https://www.todamateria.com.br/pressao-atmosferica/#:~:text=Esse%20valor%20corresponde%20a%20101325,da%20press%C3%A3o%20atmosf%C3%A9rica%20tamb%C3%A9m%20reduz.">
      <div id="id_pressao" style="width: 400px; height: 120px;"></div>
    </a>

    <a target="_blank" href="https://www.bbc.com/portuguese/vert-fut-44829117#:~:text=Viver%20a%20uma%20altitude%20moderada,ser%20uma%20escolha%20mais%20saud%C3%A1vel.&text=Enquanto%20isto%2C%20h%C3%A1%20argumentos%20em,algum%20lugar%20pr%C3%B3ximo%20%C3%A0%20%C3%A1gua.">
      <div id="id_altitude" style="width: 400px; height: 120px;"></div>
    </a>

    <div>
      Para saber mais clique nos rel√≥gios.
    </div>

  </body>
</html>
